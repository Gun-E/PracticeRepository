<div class="container mt-5 mb-5">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-5 d-flex align-items-center justify-content-center">
                <img src="/images/noddle" alt="상품 썸네일" class="img-fluid mb-5" style="max-width: 100%; height: auto;">
            </div>
            <div class="col-lg-7 mt-3">
                <h1 class="fw-bold mt-1 mb-4">상품 이름</h1>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">정가</div>
                    <div class="col-md-8" data-th-text="${#numbers.formatInteger(10000,3, 'COMMA')} + '원'"></div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">판매가</div>
                    <h4 id="salePrice" class="col-md-8 fw-bold text-success" data-th-text="${#numbers.formatInteger(won,3, 'COMMA')} + '원'"></h4>
                </div>

                <hr class="my-3">

                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">브랜드</div>
                    <div class="col-md-8">브랜드</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">원산지</div>
                    <div class="col-md-8">국내산</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">중량/용량</div>
                    <div class="col-md-8">500g</div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">포장 타입</div>
                    <div class="col-md-8">박스</div>
                </div>

                <hr class="my-3">

                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">태그</div>
                    <div class="col-md-8">태그1, 태그2, 태그3</div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">카테고리</div>
                    <div class="col-md-8">카테고리 이름</div>
                </div>

                <hr class="my-3">
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">수량</div>
                    <div class="col-md-8 d-flex align-items-center justify-content-between">
                        <div class="input-group w-25">
                            <button id="minusBtn" class="btn btn-success btn-sm" type="button">-</button>
                            <input id="quantityInput" type="text" class="form-control form-control-sm text-center" value="1" min="1">
                            <button id="plusBtn" class="btn btn-success btn-sm" type="button">+</button>
                        </div>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4 fw-bold">판매가 합계</div>
                    <div class="col-md-8">
                        <h4 id="totalSalePrice" class="fw-bold text-success"></h4>
                    </div>
                </div>
                <div class="row mt-4 mb-2">
                    <div class="col-md-7 mb-2">
                        <form th:action="@{/order}" method="post" id="orderForm">
                            <button class="btn btn-success w-100">주문하기</button>
                        </form>
                    </div>
                    <div class="col-md-2 mb-2">
                        <button class="btn btn-secondary w-100">❤</button>
                    </div>
                    <div class="col-md-3 mb-2">
                        <button class="btn btn-outline-dark w-100">장바구니</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    // 판매가 합계를 계산하고 표시하는 함수
    function calculateSaleTotal() {
        var quantity = parseInt($("#quantityInput").val());
        var pricePerUnit = parseInt($("#salePrice").text().replace("원", "").replace(",", ""));
        var salePrice = quantity * pricePerUnit;
        var formattedSalePrice = new Intl.NumberFormat('ko-KR').format(salePrice); // 숫자를 한국식 통화 포맷으로 변환
        $("#totalSalePrice").text(formattedSalePrice + "원"); // 판매가 합계 표시
    }

    // 마이너스 버튼 클릭 시 수량 감소
    $("#minusBtn").click(function() {
        var quantity = parseInt($("#quantityInput").val());
        if (quantity > 1) {
            $("#quantityInput").val(quantity - 1);
            calculateSaleTotal(); // 수량 변경 시 판매가 합계를 다시 계산
        }
    });

    // 플러스 버튼 클릭 시 수량 증가
    $("#plusBtn").click(function() {
        var quantity = parseInt($("#quantityInput").val());
        $("#quantityInput").val(quantity + 1);
        calculateSaleTotal(); // 수량 변경 시 판매가 합계를 다시 계산
    });

    // 페이지 로드 시 초기 판매가 합계 계산
    $(document).ready(function() {
        calculateSaleTotal();
    });
    // 수량 입력란에 숫자를 직접 입력했을 때 판매가 합계를 업데이트하는 함수
    $("#quantityInput").on('input', function() {
        var quantity = parseInt($(this).val());
        if (quantity < 1) { // 최소값인 1보다 작은 경우 1로 설정
            $(this).val(1);
            quantity = 1;
        }
        calculateSaleTotal(); // 수량 변경 시 판매가 합계를 다시 계산
    });
</script>